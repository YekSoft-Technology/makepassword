<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dünyanın En Zor Şifre Oyunu v2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #f0f2f5; /* Daha yumuşak bir arka plan */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #333; /* Genel metin rengi */
        }

        .game-container {
            background: #ffffff;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15); /* Daha belirgin gölge */
            max-width: 700px; /* Genişletilmiş konteyner */
            width: 100%;
            margin-bottom: 20px;
            transform: scale(0.95);
            opacity: 0;
            transition: all 0.5s ease-out; /* Giriş animasyonu */
        }

        .title {
            text-align: center;
            color: #2c3e50; /* Daha koyu başlık */
            margin-bottom: 30px;
            font-size: 2.8em; /* Daha büyük başlık */
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            font-weight: bold;
            letter-spacing: -1px; /* Hafif daraltılmış harf aralığı */
        }

        .password-input {
            width: 100%;
            padding: 18px;
            border: 2px solid #ddd;
            border-radius: 15px;
            font-size: 20px; /* Daha büyük font */
            margin-bottom: 25px;
            transition: all 0.3s ease;
            background: #fff;
            color: #333;
            font-weight: bold;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.08); /* İç gölge */
        }

        .password-input:focus {
            outline: none;
            border-color: #3498db; /* Odak rengi değiştirildi */
            box-shadow: 0 0 12px rgba(52, 152, 219, 0.4); /* Parlak odak gölgesi */
        }

        .password-input::placeholder {
            color: #888; /* Daha net placeholder */
        }

        .rules {
            margin-bottom: 20px;
        }

        .rule {
            display: flex;
            align-items: center;
            margin: 10px 0; /* Boşluk artırıldı */
            padding: 15px; /* Dolgu artırıldı */
            border-radius: 12px;
            background: #f9f9f9; /* Hafif arka plan */
            border: 1px solid #eee;
            transition: all 0.3s ease;
            color: #555;
            font-weight: bold;
            font-size: 1.1em; /* Daha büyük kural metni */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .rule.valid {
            background: #e6ffe6; /* Daha hafif yeşil */
            border-left: 5px solid #2ecc71; /* Daha canlı yeşil çizgi */
            box-shadow: 0 0 10px rgba(46, 204, 113, 0.2);
        }

        .rule.invalid {
            background: #ffe6e6; /* Daha hafif kırmızı */
            border-left: 5px solid #e74c3c; /* Daha canlı kırmızı çizgi */
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.2);
        }

        .rule-icon {
            width: 28px; /* İkon boyutu artırıldı */
            height: 28px;
            margin-right: 12px;
            font-size: 24px; /* İkon font boyutu */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rule-text {
            flex: 1;
        }

        .progress-bar {
            width: 100%;
            height: 12px; /* Kalınlaştırılmış progress bar */
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f39c12, #e74c3c, #3498db, #2ecc71); /* Daha çeşitli renk geçişi */
            border-radius: 6px;
            width: 0%;
            transition: width 0.4s ease-in-out; /* Daha akıcı geçiş */
        }

        .win-message {
            text-align: center;
            padding: 25px; /* Dolgu artırıldı */
            background: linear-gradient(135deg, #2ecc71, #27ae60); /* Canlı yeşil tonları */
            border-radius: 18px; /* Daha yuvarlak köşeler */
            color: white;
            font-size: 1.8em; /* Daha büyük font */
            margin-top: 25px;
            display: none;
            box-shadow: 0 8px 20px rgba(46, 204, 113, 0.3);
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .difficulty-selector {
            display: flex;
            justify-content: center;
            gap: 15px; /* Boşluk artırıldı */
            margin-bottom: 30px;
        }

        .difficulty-btn {
            padding: 12px 25px; /* Dolgu artırıldı */
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1em;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .difficulty-btn.easy {
            background: #2ecc71;
            color: white;
        }

        .difficulty-btn.hard {
            background: #f39c12;
            color: white;
        }

        .difficulty-btn.impossible { /* "extreme" yerine "impossible" yapıldı */
            background: #e74c3c;
            color: white;
        }

        .difficulty-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .difficulty-btn.active {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 2px solid #fff; /* Aktif butona beyaz çerçeve */
        }

        .easter-egg {
            text-align: center;
            margin-top: 25px;
            font-size: 1em;
            color: #666;
            background: #e9ecef; /* Daha belirgin arka plan */
            padding: 12px;
            border-radius: 12px;
            border: 1px dashed #ced4da; /* Kesikli çerçeve */
            font-weight: bold;
        }

        .footer {
            text-align: center;
            margin-top: 25px;
            font-size: 1.2em;
            color: #555;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .heart {
            color: #e74c3c; /* Canlı kırmızı kalp */
            font-size: 1.4em;
            animation: heartbeat 1.5s ease-in-out infinite;
        }

        @keyframes heartbeat {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="title">🔐 Dünyanın En Zor Şifre Oyunu v2</h1>

        <div class="difficulty-selector">
            <button class="difficulty-btn easy active" onclick="setDifficulty('easy')">Kolay</button>
            <button class="difficulty-btn hard" onclick="setDifficulty('hard')">Zor</button>
            <button class="difficulty-btn impossible" onclick="setDifficulty('impossible')">İmkansız</button>
        </div>

        <input type="text" class="password-input" id="password" placeholder="Şifrenizi buraya yazın..." oninput="checkPassword()">

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <div class="rules" id="rulesContainer">
            </div>

        <div class="win-message" id="winMessage">
            🎉 Tebrikler! Şifreyi başarıyla oluşturdunuz! 🎉
        </div>

        <div class="easter-egg">
            💡 İpucu: Türk Şehirleri, Yerli ve Yabancı markalar, hatta matematiksel terimler bile işin içinde!
        </div>
    </div>

    <div class="footer">
        Yekta <span class="heart">♥</span> Topluyo
    </div>

    <script>
        let currentDifficulty = 'easy';
        const turkishCities = [
            'adana', 'adiyaman', 'afyonkarahisar', 'agri', 'aksaray', 'amasya', 'ankara', 'antalya', 'ardahan',
            'artvin', 'aydin', 'balikesir', 'bartin', 'batman', 'bayburt', 'bilecik', 'bingol', 'bitlis',
            'bolu', 'burdur', 'bursa', 'canakkale', 'cankiri', 'corum', 'denizli', 'diyarbakir', 'duzce',
            'edirne', 'elazig', 'erzincan', 'erzurum', 'eskisehir', 'gaziantep', 'giresun', 'gumushane',
            'hakkari', 'hatay', 'igdir', 'isparta', 'istanbul', 'izmir', 'kahramanmaras', 'karabuk', 'karaman',
            'kars', 'kastamonu', 'kayseri', 'kirikkale', 'kirklareli', 'kirsehir', 'kilis', 'kocaeli',
            'konya', 'kutahya', 'malatya', 'manisa', 'mardin', 'mersin', 'mugla', 'mus', 'nevsehir',
            'nigde', 'ordu', 'osmaniye', 'rize', 'sakarya', 'samsun', 'siirt', 'sinop', 'sivas',
            'sanliurfa', 'sirnak', 'tekirdag', 'tokat', 'trabzon', 'tunceli', 'usak', 'van', 'yalova',
            'yozgat', 'zonguldak'
        ];
        const turkishBrands = [
            'turkcell', 'vodafone', 'turktelekom', 'bim', 'migros', 'carrefour', 'şok', 'a101', 'hakmar', 'kipa',
            'arcelik', 'vestel', 'beko', 'altus', 'profilo', 'simfer', 'sunny', 'fakir', 'arnica', 'rowenta', 'tefal',
            'eti', 'ulker', 'saray', 'şölen', 'torku', 'nestle', 'pinar', 'eyüp sabri tuncer', 'danone', 'banvit', 'aytaç',
            'coca', 'cola', 'pepsi', 'fanta', 'sprite', 'redbull', 'ice tea', 'lipton', 'nescafe', 'jacobs',
            'nike', 'adidas', 'puma', 'reebok', 'lc waikiki', 'defacto', 'colins', 'mavi', 'koton',
            'flo', 'derimod', 'greyder', 'hotic', 'kemal tanca', 'lg',
            'samsung', 'apple', 'huawei', 'xiaomi', 'oppo', 'realme', 'casper', 'exper', 'monster',
            'asus', 'msi', 'lenovo', 'hp', 'dell', 'acer', 'sony', 'philips', 'grundig', 'gigabyte', 'toshiba', 'panasonic',
            'toyota', 'honda', 'bmw', 'mercedes', 'audi', 'volkswagen', 'ford', 'opel', 'renault',
            'peugeot', 'hyundai', 'kia', 'mazda', 'nissan', 'fiat', 'togg', 'skoda', 'citroen', 'jeep',
            'turkish airlines', 'pegasus', 'anadolu jet', 'thy', 'ptt', 'trt', 'aselsan', 'roketsan',
            'tusaş', 'havelsan', 'bmc', 'baykar', 'kale', 'otokar',
            'getir', 'trendyol', 'hepsiburada', 'n11', 'amazon', 'sahibinden', 'letgo', 'yemeksepeti', 'dolap',
            'zara', 'hm', 'pull&bear', 'bershka', 'stradivarius', 'decathlon', 'boyner', 'network', 'mudo', 'lcw'
        ].map(brand => brand.toLowerCase()); // Markaları küçük harfe çevir

        const rules = {
            easy: [
                { id: 'length', text: 'Tam olarak 23 karakter olmalı', check: (pwd) => pwd.length === 23 },
                { id: 'uppercase', text: 'En az 2 büyük harf içermeli', check: (pwd) => (pwd.match(/[A-Z]/g) || []).length >= 2 },
                { id: 'lowercase', text: 'En az 2 küçük harf içermeli', check: (pwd) => (pwd.match(/[a-z]/g) || []).length >= 2 },
                { id: 'number', text: 'En az 2 rakam içermeli', check: (pwd) => (pwd.match(/[0-9]/g) || []).length >= 2 },
                { id: 'city', text: 'Bir şehir adı içermeli', check: (pwd) => turkishCities.some(city => pwd.toLowerCase().includes(city)) },
                { id: 'brand', text: 'Bir marka adı içermeli', check: (pwd) => turkishBrands.some(brand => pwd.toLowerCase().includes(brand)) },
                { id: 'special', text: 'En az 1 özel karakter içermeli', check: (pwd) => /[!@#$%^&*(),.?":{}|<>]/.test(pwd) },
                { id: 'prime', text: 'Rakamların toplamı asal sayı olmalı', check: (pwd) => {
                    const numbers = pwd.match(/\d/g);
                    if (!numbers) return false;
                    const sum = numbers.reduce((acc, num) => acc + parseInt(num), 0);
                    return isPrime(sum);
                }}
            ],
            hard: [
                { id: 'length', text: 'Tam olarak 40 karakter olmalı', check: (pwd) => pwd.length === 40 },
                { id: 'uppercase', text: 'En az 3 büyük harf içermeli', check: (pwd) => (pwd.match(/[A-Z]/g) || []).length >= 3 },
                { id: 'lowercase', text: 'En az 3 küçük harf içermeli', check: (pwd) => (pwd.match(/[a-z]/g) || []).length >= 3 },
                { id: 'number', text: 'En az 3 rakam içermeli', check: (pwd) => (pwd.match(/[0-9]/g) || []).length >= 3 },
                { id: 'city', text: 'Bir şehir adı içermeli', check: (pwd) => turkishCities.some(city => pwd.toLowerCase().includes(city)) },
                { id: 'brand', text: 'İki farklı marka adı içermeli', check: (pwd) => {
                    const foundBrands = new Set(turkishBrands.filter(brand => pwd.toLowerCase().includes(brand)));
                    return foundBrands.size >= 2;
                }},
                { id: 'special', text: 'En az 2 farklı özel karakter içermeli', check: (pwd) => {
                    const specials = pwd.match(/[!@#$%^&*(),.?":{}|<>]/g);
                    if (!specials) return false;
                    const uniqueSpecials = [...new Set(specials)];
                    return uniqueSpecials.length >= 2;
                }},
                { id: 'noRepeat', text: 'Aynı karakter art arda gelemez', check: (pwd) => !/(.)\1/.test(pwd) },
                { id: 'prime', text: 'Rakamların toplamı asal sayı olmalı', check: (pwd) => {
                    const numbers = pwd.match(/\d/g);
                    if (!numbers) return false;
                    const sum = numbers.reduce((acc, num) => acc + parseInt(num), 0);
                    return isPrime(sum);
                }},
                { id: 'vowelCount', text: 'Tam olarak 5 sesli harf içermeli', check: (pwd) => {
                    const vowels = pwd.toLowerCase().match(/[aeiouıöü]/g);
                    return vowels && vowels.length === 5;
                }},
                { id: 'alternating', text: 'Harf-rakam sırayla dönüşmeli (ilk 8 karakter)', check: (pwd) => {
                    if (pwd.length < 8) return false;
                    for (let i = 0; i < 8; i++) {
                        const char = pwd[i];
                        if (i % 2 === 0) {
                            if (!/[a-zA-Z]/.test(char)) return false;
                        } else {
                            if (!/[0-9]/.test(char)) return false;
                        }
                    }
                    return true;
                }},
                { id: 'roman', text: 'Bir Roma rakamı içermeli (I,V,X,L,C,D,M)', check: (pwd) => /[IVXLCDM]/.test(pwd.toUpperCase()) }
            ],
            impossible: [ // Yeni İmkansız seviye
                { id: 'length', text: 'Tam olarak 60 karakter olmalı', check: (pwd) => pwd.length === 60 },
                { id: 'uppercase', text: 'En az 5 büyük harf içermeli', check: (pwd) => (pwd.match(/[A-Z]/g) || []).length >= 5 },
                { id: 'lowercase', text: 'En az 5 küçük harf içermeli', check: (pwd) => (pwd.match(/[a-z]/g) || []).length >= 5 },
                { id: 'number', text: 'En az 4 rakam içermeli', check: (pwd) => (pwd.match(/[0-9]/g) || []).length >= 4 },
                { id: 'cityMultiple', text: 'İki farklı şehir adı içermeli', check: (pwd) => {
                    const foundCities = new Set(turkishCities.filter(city => pwd.toLowerCase().includes(city)));
                    return foundCities.size >= 2;
                }},
                { id: 'brandMultiple', text: 'Üç farklı marka adı içermeli', check: (pwd) => { // Marka sayısı artırıldı
                    const foundBrands = new Set(turkishBrands.filter(brand => pwd.toLowerCase().includes(brand)));
                    return foundBrands.size >= 3;
                }},
                { id: 'specialMultiple', text: 'En az 3 farklı özel karakter içermeli', check: (pwd) => {
                    const specials = pwd.match(/[!@#$%^&*(),.?":{}|<>]/g);
                    if (!specials) return false;
                    const uniqueSpecials = [...new Set(specials)];
                    return uniqueSpecials.length >= 3;
                }},
                { id: 'noRepeatLong', text: 'Hiçbir karakter art arda 2 kereden fazla gelemez (örn: aaa)', check: (pwd) => !/(.)\1{2}/.test(pwd) }, // Daha zorlu tekrar kuralı
                { id: 'primeSum', text: 'Rakamların toplamı 10 ile 30 arasında bir asal sayı olmalı', check: (pwd) => { // Asal sayıya ek aralık kuralı
                    const numbers = pwd.match(/\d/g);
                    if (!numbers) return false;
                    const sum = numbers.reduce((acc, num) => acc + parseInt(num), 0);
                    return isPrime(sum) && sum >= 10 && sum <= 30;
                }},
                { id: 'vowelExact', text: 'Tam olarak 6 sesli harf içermeli', check: (pwd) => { // Sesli harf sayısı değiştirildi
                    const vowels = pwd.toLowerCase().match(/[aeiouıöü]/g);
                    return vowels && vowels.length === 6;
                }},
                { id: 'alternatingLong', text: 'Harf-rakam-özel karakter sırayla dönüşmeli (ilk 15 karakter)', check: (pwd) => { // Yeni dönüşüm kuralı
                    if (pwd.length < 15) return false;
                    for (let i = 0; i < 15; i++) {
                        const char = pwd[i];
                        if (i % 3 === 0) { // Harf
                            if (!/[a-zA-Z]/.test(char)) return false;
                        } else if (i % 3 === 1) { // Rakam
                            if (!/[0-9]/.test(char)) return false;
                        } else { // Özel Karakter
                            if (!/[!@#$%^&*(),.?":{}|<>]/.test(char)) return false;
                        }
                    }
                    return true;
                }},
                { id: 'romanMultiple', text: 'İki farklı Roma rakamı ve toplam değeri 100\'den büyük olmalı', check: (pwd) => { // Roma rakamı ve değer kuralı
                    const romanMap = { 'I': 1, 'V': 5, 'X': 10, 'L': 50, 'C': 100, 'D': 500, 'M': 1000 };
                    const romans = pwd.toUpperCase().match(/[IVXLCDM]/g);
                    if (!romans) return false;
                    const uniqueRomans = [...new Set(romans)];
                    const totalRomanValue = romans.reduce((acc, roman) => acc + romanMap[roman], 0);
                    return uniqueRomans.length >= 2 && totalRomanValue > 100;
                }},
                { id: 'monthName', text: 'Bir ay adı içermeli (Türkçe veya İngilizce, ilk harfi büyük)', check: (pwd) => { // Ay adı kuralı
                    const months = ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran', 'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                    return months.some(month => pwd.includes(month));
                }},
                { id: 'palindromeSub', text: 'En az 5 karakterlik palindrom içermeli', check: (pwd) => { // Palindrom kuralı zorlaştırıldı
                    for (let i = 0; i < pwd.length - 4; i++) {
                        for (let j = i + 5; j <= pwd.length; j++) {
                            const substr = pwd.substring(i, j);
                            if (substr === substr.split('').reverse().join('')) {
                                return true;
                            }
                        }
                    }
                    return false;
                }},
                { id: 'fibonacciConsecutive', text: 'Ardışık iki Fibonacci sayısı içermeli (örn: 58 veya 813)', check: (pwd) => { // Ardışık Fibonacci kuralı
                    const fibs = [1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987];
                    for (let i = 0; i < fibs.length - 1; i++) {
                        if (pwd.includes(fibs[i].toString() + fibs[i+1].toString())) {
                            return true;
                        }
                    }
                    return false;
                }},
                { id: 'perfectAndAbundant', text: 'Bir mükemmel sayı (6, 28) VE bir artan sayı (örn: 12, 18) içermeli', check: (pwd) => { // Mükemmel ve artan sayı kuralı
                    const perfects = [6, 28];
                    const abundants = [12, 18, 20, 24, 30, 36, 40, 42, 48, 54, 56, 60, 66, 70, 72, 78, 80, 84, 88, 90, 96, 100, 102, 104, 108, 112, 114, 120]; // Örnek artan sayılar
                    const hasPerfect = perfects.some(perfect => pwd.includes(perfect.toString()));
                    const hasAbundant = abundants.some(abundant => pwd.includes(abundant.toString()));
                    return hasPerfect && hasAbundant;
                }},
                { id: 'noVowelEnd', text: 'Sesli harfle bitemez', check: (pwd) => { // Bitiş kuralı
                    if (pwd.length === 0) return false;
                    return !/[aeiouıöüAEIOUIÖÜ]/.test(pwd[pwd.length - 1]);
                }},
                { id: 'primeNumberEnd', text: 'Son rakam asal sayı olmalı (2,3,5,7)', check: (pwd) => { // Son rakam asal kuralı
                    const lastChar = pwd[pwd.length - 1];
                    return /[2357]/.test(lastChar);
                }},
                { id: 'quarterYear', text: 'Bir çeyrek yıl adı içermeli (Q1, Q2, Q3, Q4)', check: (pwd) => { // Çeyrek yıl kuralı
                    return /(Q1|Q2|Q3|Q4)/i.test(pwd);
                }},
                { id: 'emoji', text: 'En az 1 emoji içermeli', check: (pwd) => { // Emoji kuralı
                    const emojiRegex = /(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])/;
                    return emojiRegex.test(pwd);
                }},
                { id: 'specificPhrase', text: '"Yekta" veya "Topluyo" kelimesini içermemeli', check: (pwd) => { // Gizli kural
                    return !(pwd.toLowerCase().includes('yekta') || pwd.toLowerCase().includes('topluyo'));
                }}
            ]
        };

        function isPrime(n) {
            if (n <= 1) return false;
            if (n <= 3) return true;
            if (n % 2 === 0 || n % 3 === 0) return false;
            for (let i = 5; i * i <= n; i += 6) {
                if (n % i === 0 || n % (i + 2) === 0) return false;
            }
            return true;
        }

        // Artan sayı kontrolü (Mükemmel sayı kuralı için yardımcı fonksiyon)
        function isAbundant(n) {
            if (n <= 0) return false;
            let sumOfDivisors = 1; // 1 her zaman bölendir
            for (let i = 2; i * i <= n; i++) {
                if (n % i === 0) {
                    sumOfDivisors += i;
                    if (i * i !== n) {
                        sumOfDivisors += n / i;
                    }
                }
            }
            return sumOfDivisors > n;
        }


        function setDifficulty(difficulty) {
            currentDifficulty = difficulty;
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.difficulty-btn.${difficulty}`).classList.add('active');

            renderRules();
            checkPassword();
        }

        function renderRules() {
            const container = document.getElementById('rulesContainer');
            container.innerHTML = '';

            rules[currentDifficulty].forEach(rule => {
                const ruleElement = document.createElement('div');
                ruleElement.className = 'rule';
                ruleElement.id = `rule-${rule.id}`;
                ruleElement.innerHTML = `
                    <div class="rule-icon">❌</div>
                    <div class="rule-text">${rule.text}</div>
                `;
                container.appendChild(ruleElement);
            });
        }

        function checkPassword() {
            const password = document.getElementById('password').value;
            const currentRules = rules[currentDifficulty];
            let validCount = 0;

            currentRules.forEach(rule => {
                const ruleElement = document.getElementById(`rule-${rule.id}`);
                const isValid = rule.check(password);

                if (isValid) {
                    ruleElement.classList.add('valid');
                    ruleElement.classList.remove('invalid');
                    ruleElement.querySelector('.rule-icon').textContent = '✅';
                    validCount++;
                } else {
                    ruleElement.classList.add('invalid');
                    ruleElement.classList.remove('valid');
                    ruleElement.querySelector('.rule-icon').textContent = '❌';
                }
            });

            const progress = (validCount / currentRules.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            const winMessage = document.getElementById('winMessage');
            if (validCount === currentRules.length) {
                winMessage.style.display = 'block';
                winMessage.innerHTML = `
                    🎉 Tebrikler! ${currentDifficulty === 'easy' ? 'Kolay' : currentDifficulty === 'hard' ? 'Zor' : 'İmkansız'}
                    seviyesini tamamladınız! 🎉<br>
                    Şifreniz: <strong>${password}</strong>
                `;
            } else {
                winMessage.style.display = 'none';
            }
        }

        // Sayfa yüklendiğinde kuralları oluştur
        renderRules();

        // Başlangıç animasyonu
        setTimeout(() => {
            document.querySelector('.game-container').style.transform = 'scale(1)';
            document.querySelector('.game-container').style.opacity = '1';
        }, 100);
    </script>
</body>
</html>
